<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Historical Data</title><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><style>:root{font-family:"Segoe UI",Arial,sans-serif;color-scheme:light dark}*{box-sizing:border-box}body{margin:0;min-height:100vh;background:var(--bg);color:var(--text);transition:background 0.2s ease,color 0.2s ease}body[data-theme="light"]{--bg:#f8fafc;--surface:#ffffff;--text:#1f2933;--muted:#475569;--header-bg:#e2e8f0;--card-border:rgba(15,23,42,0.08);--card-shadow:rgba(15,23,42,0.08);--accent:#2563eb;--accent-strong:#1d4ed8;--accent-contrast:#f8fafc;--chip:#f8fafc;--input-border:#cbd5e1;--danger:#ef4444;--pill-bg:rgba(37,99,235,0.12)}body[data-theme="dark"]{--bg:#0f172a;--surface:#1e293b;--text:#e2e8f0;--muted:#94a3b8;--header-bg:#16213d;--card-border:rgba(15,23,42,0.55);--card-shadow:rgba(0,0,0,0.55);--accent:#38bdf8;--accent-strong:#22d3ee;--accent-contrast:#0f172a;--chip:rgba(148,163,184,0.15);--input-border:rgba(148,163,184,0.4);--danger:#f87171;--pill-bg:rgba(56,189,248,0.18)}header{background:var(--header-bg);padding:28px 24px;box-shadow:0 20px 45px var(--card-shadow)}header .bar{display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap;align-items:flex-start}header h1{margin:0;font-size:1.9rem}header p{margin:8px 0 0;color:var(--muted);max-width:640px;line-height:1.4}.header-actions{display:flex;gap:12px;flex-wrap:wrap;align-items:center}.pill{padding:10px 20px;text-decoration:none;font-weight:600;background:var(--pill-bg);color:var(--accent);border:1px solid transparent;transition:transform 0.15s ease}.pill:hover{transform:translateY(-1px)}.icon-button{width:42px;height:42px;border:1px solid var(--card-border);background:var(--surface);color:var(--text);font-size:1.2rem;cursor:pointer;transition:transform 0.15s ease}.icon-button:hover{transform:translateY(-1px)}main{padding:24px;max-width:1200px;margin:0 auto;width:100%}.card{background:var(--surface);border:1px solid var(--card-border);padding:20px;box-shadow:0 25px 55px var(--card-shadow);margin-bottom:24px}.filters{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:20px;align-items:end}.field{display:flex;flex-direction:column}.field span{font-size:0.9rem;color:var(--muted);margin-bottom:4px}.field input,.field select{padding:8px 12px;border:1px solid var(--input-border);font-size:0.95rem;background:var(--bg);color:var(--text)}button{border:none;padding:10px 16px;font-size:0.95rem;font-weight:600;cursor:pointer;background:var(--accent);color:var(--accent-contrast);transition:transform 0.15s ease}button:hover{transform:translateY(-1px)}.chart-container{position:relative;height:400px;width:100%}</style></head><body data-theme="light"><header><div class="bar"><div><h1>Historical Data</h1><p> View and analyze historical sensor data logs. </p></div><div class="header-actions"><a class="pill secondary" href="/">Dashboard</a><a class="pill secondary" href="/client-console">Client Console</a><a class="pill secondary" href="/config-generator">Config Generator</a><a class="pill secondary" href="/contacts">Contacts</a><a class="pill secondary" href="/serial-monitor">Serial Monitor</a><a class="pill secondary" href="/calibration">Calibration</a><a class="pill" href="/historical">Historical Data</a><a class="pill secondary" href="/server-settings">Server Settings</a></div></div></header><main><div class="card"><div class="filters"><label class="field"><span>Client Device</span><select id="clientSelect"><option value="">Select Client...</option></select></label><label class="field"><span>Date Range</span><select id="rangeSelect"><option value="24h">Last 24 Hours</option><option value="7d">Last 7 Days</option><option value="30d">Last 30 Days</option><option value="custom">Custom Range</option></select></label><label class="field custom-date" style="display:none"><span>Start Date</span><input type="date" id="startDate"></label><label class="field custom-date" style="display:none"><span>End Date</span><input type="date" id="endDate"></label><button id="loadBtn">Load Data</button><button id="exportBtn" class="secondary" style="background:transparent;border:1px solid var(--card-border);color:var(--text)">Export CSV</button></div><div class="chart-container"><canvas id="historyChart"></canvas></div></div><div class="card"><h3>Data Log</h3><div style="overflow-x:auto"><table style="width:100%;border-collapse:collapse;text-align:left"><thead><tr style="border-bottom:1px solid var(--card-border)"><th style="padding:12px">Timestamp</th><th style="padding:12px">Client</th><th style="padding:12px">Sensor</th><th style="padding:12px">Value</th><th style="padding:12px">Status</th></tr></thead><tbody id="dataTableBody"><tr><td colspan="5" style="padding:20px;text-align:center;color:var(--muted)">No data loaded</td></tr></tbody></table></div></div></main><script>const ctx = document.getElementById('historyChart').getContext('2d');let chart = new Chart(ctx,{type:'line',data:{labels:[],datasets:[]},options:{responsive:true,maintainAspectRatio:false,interaction:{mode:'index',intersect:false},scales:{x:{grid:{color:'rgba(0,0,0,0.05)'}},y:{grid:{color:'rgba(0,0,0,0.05)'}}}}});document.getElementById('rangeSelect').addEventListener('change',(e)=>{const custom = document.querySelectorAll('.custom-date');if(e.target.value === 'custom'){custom.forEach(el => el.style.display = 'flex');}else{custom.forEach(el => el.style.display = 'none');}});document.getElementById('loadBtn').addEventListener('click',()=>{// Mock data loadingconst labels = [];const data1 = [];const data2 = [];const now = new Date();for(let i=0;i<24;i++){const d = new Date(now - (23-i)*3600000);labels.push(d.toLocaleTimeString());data1.push(50 + Math.random()*20);data2.push(30 + Math.random()*10);}chart.data.labels = labels;chart.data.datasets = [{label:'Tank A Level',data:data1,borderColor:'#2563eb',tension:0.4},{label:'Tank B Level',data:data2,borderColor:'#ef4444',tension:0.4}];chart.update();const tbody = document.getElementById('dataTableBody');tbody.innerHTML = '';for(let i=23;i>=0;i--){const row = `<tr><td style="padding:12px">${labels[i]}</td><td style="padding:12px">Client-01</td><td style="padding:12px">Tank A</td><td style="padding:12px">${data1[i].toFixed(1)} %</td><td style="padding:12px">OK</td></tr>`;tbody.innerHTML += row;}});</script></body></html>